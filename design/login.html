
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Spotify API Tutorial</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles/spotify.css">
    <link rel="icon" href="https://open.spotifycdn.com/cdn/images/favicon.0f31d2ea.ico">
</head>
<body>
    <header>
        <h1>Spotify API Tutorial</h1>
        <nav>
            <a href="index.html" class="selected">Walkthrough</a>
            <a href="demo/index.html">Demo</a>
            <a href="https://developer.spotify.com/documentation/web-api/">API Reference</a>
        </nav>
    </header>

    <main>
        <section class="card">
  
            <p>Paste your Client ID here: <input id="paste-client-id" data-sync="client_id" type="text" size="40" placeholder="Client ID"> <span class="note">(we won't steal it, promise!)</span></p>

            <h3 id="redirect-uri">Redirect URI</h3>
            
        </section>
        <section class="card">
            <h2 id="getting-an-authorization-code">2. Getting an Authorization Code</h2>

            <p>You will need two things to request an auth code:</p>
            <ul>
                <li>
                    <code>client_id</code>: <input id="login-client-id" data-sync="client_id" type="text" size="40" placeholder="Client ID">
                </li>
                <li>
                    <code>redirect_uri</code>: <input id="login-redirect-uri" data-sync="redirect_uri" type="text" size="40" placeholder="Redirect URI"> <span class="note">(This should be a page that is prepared to handle the returned auth code)</span>
                </li>
            </ul>

            <h3 id="making-the-request">Making the Request</h3>
            <p></p>

            <p>Here are the values we've generated for this tutorial: <button id="generate-button" type="button" class="small">Regenerate</button></p>

            <ul>
                <li><code>code_verifier</code>: <code id="code-verifier" class="graybg"></code></li>
                <li><code>code_challenge</code>: <code id="code-challenge" class="graybg"></code></li>
            </ul>

            <h3 id="try-login">Try It Yourself!</h3>
            <p>If you've set the <code>client_id</code> and the <code>redirect_uri</code> above, you can click this button to request an authorization code:</p>
            <button id="login-button" class="primary" type="button">Login with Spotify</button>
            <p>Your auth code is: <code id="auth-code" class="graybg"></code></p>
        </section>
        <section class="card">

            <h3 id="making-the-token-request">Making the Request</h3>
            <p>There are a few body parameters, which need to be in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST#example"><code>x-www-form-urlencoded</code></a> format. These are:</p>
            <ul>
                <li><code>grant_type</code>: <code class="graybg">"authorization_code"</code> <span class="note">(a string literal)</span></li>
                <li><code>client_id</code>: <code data-sync="client_id" class="graybg"></code> <span class="note">(same as before)</span></li>
                <li><code>redirect_uri</code>: <code data-sync="redirect_uri" class="graybg"></code> <span class="note">(same one used to request the auth code)</span></li>
                <li><code>code_verifier</code>: <code id="code-verifier-body" class="graybg"></code> <span class="note">(value from <code>localStorage</code>)</span></li>
                <li><code>code</code>: <code id="auth-code-body" class="graybg"></code> <span class="note">(from the URL)</span></li>
            </ul>

            <p>Here is an example of a request that exchanges the auth code for an access token:</p>

            <!-- HTML generated using hilite.me -->

            <h3 id="try-token">Try It Yourself!</h3>
            <p>If you've successfully obtained an auth code, you can click this button to exchange it for an access token:</p>
            <button id="token-button" class="primary" type="button">Get Access Token</button>
            <p>Your access token is: <code id="access-token" class="graybg"></code></p>
            <p class="note">This token will last for an hour, after which you will need to request a new one. There is a mechanism to <a href="https://developer.spotify.com/documentation/web-api/tutorials/refreshing-tokens">refresh the token</a>, so the user doesn't need to log in again.</p>

        </section>
        <section class="card">
            <h3 id="try-api">Try It Yourself!</h3>
            <p>If you've successfully obtained an access token, you can click this button to get the current user's profile:</p>
            <button id="profile-button" class="primary" type="button">Get User Profile</button>
            <p>Your user profile is: <code id="profile-name" class="graybg"></code></p>
            <img id="profile-image" src="https://placehold.co/300x300" alt="User profile">
        </section>
    </main>

    <footer>
        <p>Created with ❤️ for CS 343: Application Development, James Madison University.</p>
    </footer>

    <script src="../scripts/script.js"></script>
</body>
</html>
